)]}'
{"version":3,"sources":["external-file-loader/lib/external-file-loader.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,0B;;AAEA,a;;AAEA,0B;AACA,uB;AACA,E;;AAEA,2F;AACA,yF;AACA,+F;AACA,kE;AACA,kB;AACA,a;AACA,W;;AAEA,qC;AACA,wB;AACA,gD;AACA,sB;AACA,G;;AAEA,8C;AACA,yB;AACA,gB;AACA,G;;AAEA,+B;;AAEA,gE;AACA,+B;AACA,2B;AACA,kB;AACA,sC;AACA,I;AACA,K;;AAEA,+E;AACA,uG;AACA,qC;AACA,sF;AACA,mB;;AAEA,iB;AACA,E;;AAEA,2C;AACA,kB;AACA,8C;AACA,yB;AACA,gB;AACA,G;;AAEA,2C;AACA,wC;AACA,uC;AACA,gC;AACA,4D;;AAEA,8B;AACA,E;AACA,C;AACA,0D;AACA,+B;AACA,kC;AACA,G;AACA,C;AACA,e;AACA,a;AACA,e;AACA,4B;AACA,e;AACA,K;AACA,c;AACA,K;AACA,G;AACA,wD;AACA,c;AACA,K;AACA,E;;AAEA,0C;AACA,kB;AACA,+D;AACA,E;;AAEA,qC;AACA,0C;AACA,uB;AACA,E;AACA,C;AACA,oC;AACA,oC;;AAEA,8B;;AAEA,K","file":"/packages/external-file-loader.js","sourcesContent":["// external-file-loader.js\n\n(function() {\n\n\tvar Loader = function() {\n\t\tthis.loadedUrls = {};\n\t}\n\n\t// Callback must be of the jquery success callback form: function(data, textStatus, jqxhr)\n\t// timeoutDelay is the number of ms before the script request times out. Default is 5000\n\t// If the second arg is a number instead of a callback, it will be considered the timeoutDelay\n\tLoader.prototype.loadJs = function(url, callback, timeoutDelay) {\n\t\tvar self = this,\n\t\t\ttimeoutId,\n\t\t\tpromise;\n\n\t\tif (typeof callback === 'number') {\n\t\t\ttimeoutId = callback;\n\t\t} else if (typeof timeoutDelay !== 'number') {\n\t\t\ttimeoutDelay = 5000\n\t\t}\n\n\t\t// Prevent duplicate URLs from being loaded.\n\t\tif (self.loaded(url)) {\n\t\t\treturn false;\n\t\t}\n\n\t\tself.loadedUrls[url] = false;\n\n\t\tpromise = $.getScript(url, function(data, textStatus, jqxhr) {\n\t\t\tself.loadedUrls[url] = true;\n\t\t\tclearTimeout(timeoutId);\n\t\t\tif (callback) {\n\t\t\t\tcallback(data, textStatus, jqxhr);\n\t\t\t}\n\t\t});\n\n\t\t// $.getScript doesn't reject promises with cross-domain so we need a timeout\n\t\t// cf. http://stackoverflow.com/questions/1406537/handling-errors-in-jquery-getscript#answer-11741631\n\t\ttimeoutId = setTimeout(function() {\n\t\t\tpromise.abort(\"Timeout error: The script was not found or took too long to load.\");\n\t\t}, timeoutDelay);\n\n\t\treturn promise;\n\t}\n\n\tLoader.prototype.loadCss = function(url) {\n\t\tvar self = this;\n\t\t// Prevent duplicate URLs from being loaded.\n\t\tif (self.loaded(url)) {\n\t\t\treturn false;\n\t\t}\n\n\t\tvar css = document.createElement('link');\n\t\tcss.setAttribute('rel', 'stylesheet');\n\t\tcss.setAttribute('type', 'text/css');\n\t\tcss.setAttribute('href', url);\n\t\tdocument.getElementsByTagName(\"head\")[0].appendChild(css);\n\n\t\tself.loadedUrls[url] = true;\n\t}\n\t\n\tLoader.prototype.loadHtml = function(url,template_name) {\n\t\tif(Template[template_name]) {\n\t\t\treturn Template[template_name];\n\t\t}\n\t\n\t\tvar raw = '';\n\t\tthis.ajax({\n\t\t\turl:    url,\n\t\t\tsuccess: function(html) {\n\t\t\t\traw = html;\n\t\t\t},\n\t\t\tasync:false\n\t\t});\n\t\t\t\n\t\treturn Template.__define__(template_name, function() {\n\t\t\treturn raw;\n\t\t});\n\t}\n\n\tLoader.prototype.loaded = function(url) {\n\t\tvar self = this;\n\t\treturn (_.has(self.loadedUrls, url) && self.loadedUrls[url]);\n\t}\n\n\t// Only use this method for testing.\n\tLoader.prototype.resetUrls = function() {\n\t\tthis.loadedUrls = {};\n\t}\n\t\n\t// Override for stub during testing\n\tLoader.prototype.ajax = jQuery.ajax\n\n\tMeteor.Loader = new Loader();\n\n}());"]}